library(x)?
?library()
install.packages()
library(XLConnct)
library(XLConnect)
library(rJava)
library("XLConnect", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("XLConnectJars", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("rJava", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("XLConnect", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("XLConnectJars", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
detach("package:XLConnect", unload=TRUE)
detach("package:XLConnectJars", unload=TRUE)
detach("package:utils", unload=TRUE)
library("utils", lib.loc="C:/Program Files/R/R-2.15.2/library")
library("rJava", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("XLConnect", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("XLConnectJars", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
library("spatial", lib.loc="C:/Program Files/R/R-2.15.2/library")
install.packages("rJava")
install.packages("sp")
library("sp", lib.loc="C:/Users/frm10/Documents/R/win-library/2.15")
# V :2013-05-02
#set working Directory
setwd("C:/Users/frm10/Desktop/Willow Census R")
#read pplant data from the excell CVS file
Plant.data<-read.csv('Data_Plants.csv',header=T,as.is=T,colClasses=c('numeric','character'))
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
library(lattice)
Open.Path<-read.table('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData\EddyCovarianceData20140523.dat')
Open.Path<-read.table('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523.dat')
Open.Path<-read.table('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat')
Open.Path<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,)
Open.Path<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1)
Open.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=0,nrows=1)
View(Open.Path.description)
View(Open.Path)
str(Open.Path.data)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1)
str(Open.Path.data)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1,as.is=F)
str(Open.Path.data)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1,as.is=F,colClasses=c('numeric'))
View(Open.Path)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1)
View(Open.Path.var_names)
View(Open.Path.var_names)
Open.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=2,nrows=1)
View(Open.Path.var_units)
View(Open.Path.var_units)
Open.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=3,nrows=1)
View(Open.Path.var_desc)
View(Open.Path.var_desc)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=4,as.is=F)
View(Open.Path.data)
View(Open.Path.data)
str(Open.Path.data)
names(Open.Path.data)<-Open.Path.var_names
View(Open.Path.data)
str(Open.Path.data)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1)
View(Open.Path.var_names)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1,nrows=1)
names(Open.Path.data)<-Open.Path.var_names
str(Open.Path.data)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1,nrows=1)
View(Open.Path.var_names)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=1,nrows=0)
View(Open.Path.var_names)
View(Open.Path.var_names)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1)
View(Open.Path.var_names)
names(Open.Path.data)<-Open.Path.var_names[1,]
str(Open.Path.data)
Open.Path.var_names[1,]
names(Open.Path.data)
names(Open.Path.data)<-Open.Path.var_names[1,]
names(Open.Path.data)
str(-Open.Path.var_names)
str(Open.Path.var_names)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
str(Open.Path.var_names)
names(Open.Path.data)<-Open.Path.var_names[1,]
str(Open.Path.data)
Open.Path.data$TIMESTAMP<-as.character(Open.Path.data$TIMESTAMP)
str(Open.Path.data)
Open.Path.data$TIMESTAMP<-as.POSIXct(as.character(Open.Path.data$TIMESTAMP),format="%Y-%m-%d H%:%M:%S")
Open.Path.data$TIMESTAMP<-as.POSIXct(as.character(Open.Path.data$TIMESTAMP),format="%Y-%m-%d H%:%M:%S")
str(Open.Path.data)
Open.Path.data$TIMESTAMP<-as.POSIXct(strftime(as.character(Open.Path.data$TIMESTAMP),format="%Y-%m-%d H%:%M:%S"))
str(Open.Path.data)
Timess<-Open.Path.data$TIMESTAMP[1:5]
Timess
Open.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=0,nrows=1)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Open.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=2,nrows=1)
Open.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=3,nrows=1)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=4,as.is=F)
names(Open.Path.data)<-Open.Path.var_names[1,]
Timess<-Open.Path.data$TIMESTAMP[1:5]
View(Open.Path.var_units)
View(Open.Path.var_units)
Timess
Timess<-as.character(Open.Path.data$TIMESTAMP[1:5])
Timess
TT<-as.POSIXct(Timess)
TT
TT<-as.POSIXct(Timess,usetz=F)
TT
Open.Path.data$TIMESTAMP<-as.POSIXct(as.character(Open.Path.data$TIMESTAMP))
head(str(Open.Path.data))
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl)
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,xlim=c(-5,5))
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-5,5))
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2))
library(lattice)
xyplot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2), )
xyplot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2) )
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2) )
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2),type="l",col="RED" )
plot(Open.Path.data$TIMESTAMP,Open.Path.data$cs616_wcr_Avg(1),type="l",col="BLUE" )
plot(Open.Path.data$TIMESTAMP,Open.Path.data$cs616_wcr_Avg(1) )
Open.Path.data$cs616_wcr_Avg(1)
plot(Open.Path.data$TIMESTAMP,Open.Path.data[,c("cs616_wcr_Avg(1)")] )
plot(Open.Path.data$TIMESTAMP,Open.Path.data[,c("cs616_wcr_Avg(1)")],type="l", col="BLUE" )
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2),type="l",col="RED",ylab="Carbon Dioxide Flux (mg/m^2 s)" )
plot(Open.Path.data$TIMESTAMP,Open.Path.data[,c("cs616_wcr_Avg(1)")],type="l", col="BLUE", ylab="Soil Water Content")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="" )
plot(Open.Path.data$TIMESTAMP,Open.Path.data[,c("cs616_wcr_Avg(1)")],type="l", col="BLUE", ylab="Soil Water Content",xlab="")
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
#Read the Data Description, variable names, units, description and data
Open.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=0,nrows=1)
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
#Read the Data Description, variable names, units, description and data
Closed.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=0,nrows=1)
Closed.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Closed.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=2,nrows=1)
Closed.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=3,nrows=1)
Closed.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=T,skip=4,as.is=F)
names(Closed.Path.data)<-Closed.Path.var_names[1,]
str(Closed.Path.data)
Closed.Path.data$TIMESTAMP<-as.POSIXct(as.character(Closed.Path.data$TIMESTAMP))
#Plot a few varibles for inspection
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$Fc_wpl,ylim=c(-2,2),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$Fc_wpl,type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$Fc,type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data[,c("cs616_wcr_Avg(1)")],type="l", col="BLUE", ylab="Soil Water Content",xlab="")
Closed.Path.data$TIMESTAMP
Closed.Path.data[,c("cs616_wcr_Avg(1)")
)
Closed.Path.data[,c("cs616_wcr_Avg(1)")]
strClosed.Path.data)
str(Closed.Path.data)
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$Fc,type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$CO2_Avg,type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
#set the working directory
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
#Read the Data Description, variable names, units, description and data
Open.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=0,nrows=1)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Open.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=2,nrows=1)
Open.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=3,nrows=1)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=4,as.is=F)
names(Open.Path.data)<-Open.Path.var_names[1,]
#Format the Time Stamp data as a date
Open.Path.data$TIMESTAMP<-as.POSIXct(as.character(Open.Path.data$TIMESTAMP))
#Plot a few varibles for inspection
library(lattice)
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Open.Path.data$TIMESTAMP,Open.Path.data[,c("cs616_wcr_Avg(1)")],type="l", col="BLUE", ylab="Soil Water Content",xlab="")
#Program to import Open Path Eddy Covariance Data and Analyse it in R
#Felipe Montes
#2014 06 03
#set the working directory
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
#Read the Data Description, variable names, units, description and data
Open.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=0,nrows=1)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Open.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=2,nrows=1)
Open.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=3,nrows=1)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=4,as.is=F)
names(Open.Path.data)<-Open.Path.var_names[1,]
#Format the Time Stamp data as a date
Open.Path.data$TIMESTAMP<-as.POSIXct(as.character(Open.Path.data$TIMESTAMP))
#Plot a few varibles for inspection
library(lattice)
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-2,2),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-1.5,1.5),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-1.0,1.0),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-1.0,1.0),type="l",col="RED", ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="",main="Open Path")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$Fc_wpl,ylim=c(-1.0,1.0),type="l",col="RED", lwd=3,ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="",main="Open Path")
plot(Open.Path.data$TIMESTAMP,Open.Path.data[,c("cs616_wcr_Avg(1)")],type="l", lwd=3,col="BLUE", ylab="Soil Water Content",xlab="",main="Open Path")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$Fc,type="l",col="RED", lwd=3, ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="",main="Closed Path")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$CO2_Avg,type="l",col="RED", ylab="Carbon Dioxide Concentration mg/m3",xlab="")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$Fc,type="l",col="BLACK", lwd=3, ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="",main="Closed Path")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$CO2_Avg,type="l",col="BLACK", lwd=3,ylab="Carbon Dioxide Concentration mg/m3",xlab="",main="Closed Path"))
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$CO2_Avg,type="l",col="BLACK", lwd=3,ylab="Carbon Dioxide Concentration mg/m3",xlab="",main="Closed Path")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$CO2_Avg,type="l",col="BLACK", lwd=3,ylab="Carbon Dioxide Concentration mg/m3",xlab="",main="Closed Path")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_Avg,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path")
#set the working directory
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
#Read the Data Description, variable names, units, description and data
Open.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=0,nrows=1)
Open.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Open.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=2,nrows=1)
Open.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=F,skip=3,nrows=1)
Open.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/OpenPathEddyCovarianceData/EddyCovarianceData20140523/20140523OpenPathCR3000_flux.dat',header=T,skip=4,as.is=F)
names(Open.Path.data)<-Open.Path.var_names[1,]
#Format the Time Stamp data as a date
Open.Path.data$TIMESTAMP<-as.POSIXct(as.character(Open.Path.data$TIMESTAMP))
#Plot a few varibles for inspection
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_Avg,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path")
str(Open.Path.data)
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_mean,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_mean,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path",ylim=c(300,600))
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_mean,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path",ylim=c(400,600))
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_mean,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path")
plot(Closed.Path.data$TIMESTAMP,Closed.Path.data$CO2_Avg,type="l",col="BLACK", lwd=3,ylab="Carbon Dioxide Concentration mg/m3",xlab="",main="Closed Path")
plot(Open.Path.data$TIMESTAMP,Open.Path.data$CO2_mean,type="l", lwd=3,col="BLACK", ylab="Carbon Dioxide Concentration",xlab="",main="Open Path")
Closed.Path.data$TIMESTAMP>="2014-05-14 12:00:00"
Closed.Path.data$TIMESTAMP
Closed.Path.data$TIMESTAMP[1:200]
plot(Closed.Path.data$TIMESTAMP[1:200],Closed.Path.data$Fc[1:200],type="l",col="BLACK", lwd=3, ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="",main="Closed Path")
plot(Closed.Path.data$TIMESTAMP[1:200],Closed.Path.data$CO2_Avg[1:200],type="l",col="BLACK", lwd=3,ylab="Carbon Dioxide Concentration mg/m3",xlab="",main="Closed Path")
setwd("C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/EddyCovariance_DataAnalysis")
#Read the Data Description, variable names, units, description and data
Closed.Path.description<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=0,nrows=1)
Closed.Path.var_names<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=1,nrows=1,colClasses=c('character'))
Closed.Path.var_units<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=2,nrows=1)
Closed.Path.var_desc<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=F,skip=3,nrows=1)
Closed.Path.data<-read.csv('C:/Felipe/Willow Project/Willow Experiments/Willow Rockview/EddyCovarianceData/ClosedPathEddyCovarianceData/ClosedPathEddyCovarianceData20140523/20140523ClosedPathCR3000_flux.dat',header=T,skip=4,as.is=F)
names(Closed.Path.data)<-Closed.Path.var_names[1,]
#Format the Time Stamp data as a date
Closed.Path.data$TIMESTAMP<-as.POSIXct(as.character(Closed.Path.data$TIMESTAMP))
#Plot a few varibles for inspection
library(lattice)
plot(Closed.Path.data$TIMESTAMP[1:200],Closed.Path.data$Fc[1:200],type="l",col="BLACK", lwd=3, ylab="Carbon Dioxide Flux (mg/m^2 s)",xlab="",main="Closed Path")
plot(Closed.Path.data$TIMESTAMP[1:200],Closed.Path.data$CO2_Avg[1:200],type="l",col="BLACK", lwd=3,ylab="Carbon Dioxide Concentration mg/m3",xlab="",main="Closed Path")
Closed.Path.data$TIMESTAMP[1:200]
TimeStart<-Sys.time()  ;
.libPaths("C:/Felipe/Sotware&Coding/R_Library/library")  ;
setwd("C:\\Felipe\\Willow_Project\\Willow_Experiments\\Willow_Rockview\\EddyCovarianceData_Felipe\\RCode\\TOB3intoR") ;
TOB3.Directories<-list.dirs("C:\\Felipe\\Willow_Project\\Willow_Experiments\\Willow_Rockview\\EddyCovarianceData_Felipe\\2019\\Willow\\WillowOpenPathEddyCovarianceData", recursive=T) ;
TOB3.Directories
TOB3.file<-list.files(TOB3.Directories[FileNo])[grep("lux", list.files(TOB3.Directories[FileNo]), value=F)] ;
TOB3.file
TOB3.file<-list.files(TOB3.Directories[FileNo])[grep("lux", list.files(TOB3.Directories[FileNo]), value=F)] ;
TOB3.file
FileNo<-1  ;
TOB3.file<-list.files(TOB3.Directories[FileNo])[grep("lux", list.files(TOB3.Directories[FileNo]), value=F)] ;
TOB3.Directories<-list.dirs("C:\\Felipe\\Willow_Project\\Willow_Experiments\\Willow_Rockview\\EddyCovarianceData_Felipe\\2019\\Willow\\WillowOpenPathEddyCovarianceData", recursive=T) ;
TOB3.Directories
FileNo<-2  ;
TOB3.file<-list.files(TOB3.Directories[FileNo])[grep("lux", list.files(TOB3.Directories[FileNo]), value=F)] ;
TOB3.file
Dir.name<-paste0("./",strsplit(TOB3.Directories[FileNo],split="/")[[1]][2]) ;
Dir.name
dir.create(Dir.name)
Dir.name
TOB3toTOA5inst<-paste0('tob32.exe -a -o ',Dir.name,"/ ", paste(TOB3.Directories[FileNo],TOB3.file[1], sep="\\")) ;
TOB3toTOA5inst
system(TOB3toTOA5inst) ;
system("tob32.exe --?");
Name.parts<-strsplit(TOB3.file,'[.]')  ;
assign('Flux.names', read.csv( paste0(Dir.name,"/",Name.parts[[1]][1],".",Name.parts[[1]][2], ".TOA") , skip=1,header=F,nrows=1,as.is=T));
assign('Flux.units', read.csv( paste0(Dir.name,"/",Name.parts[[1]][1],".",Name.parts[[1]][2], ".TOA") , skip=2,header=F,nrows=1,as.is=T));
assign('Flux.units2', read.csv(paste0(Dir.name,"/",Name.parts[[1]][1],".",Name.parts[[1]][2], ".TOA") , skip=3,header=F,nrows=1,as.is=T));
Flux.data<-read.csv( paste0(Dir.name,"/",Name.parts[[1]][1],".",Name.parts[[1]][2], ".TOA"), skip=6,header=F,as.is=T,col.names=Flux.names)
str(Flux.data)
dim(Flux.data)
Npoints<-seq((dim(Flux.data)[1]-1000),dim(Flux.data)[1]) ;
Npoints_1<-seq((dim(Flux.data_1)[1]-100),dim(Flux.data_1)[1]) ;
Npoints_2<-seq((dim(Flux.data_2)[1]-100),dim(Flux.data_2)[1]) ;
plot(as.POSIXct(Flux.data$TIMESTAMP[Npoints]),Flux.data$shf_Avg.1[Npoints],type="l",col="GREEN" )# , ylim=c(-100,100));
points(as.POSIXct(Flux.data$TIMESTAMP[Npoints]),Flux.data$shf_Avg.2[Npoints],type="l",col="BLUE" );
points(as.POSIXct(Flux.data$TIMESTAMP[Npoints]),Flux.data$shf_Avg.3[Npoints],type="l",col="RED"  );
points(as.POSIXct(Flux.data$TIMESTAMP[Npoints]),Flux.data$shf_Avg.4[Npoints],type="l",col="CYAN");
plot(as.POSIXct(Flux.data_1$TIMESTAMP[Npoints_1]),Flux.data_1$CO2_wpl_LE[Npoints_1],type="l",col="GREEN", ylim=c(-0.5,0.5));
points(as.POSIXct(Flux.data_1$TIMESTAMP[Npoints_1]),Flux.data_1$CO2_wpl_H[Npoints_1],type="l",col="BLUE" );
points(as.POSIXct(Flux.data_1$TIMESTAMP[Npoints_1]),Flux.data_1$CO2_wpl_H[Npoints_1]+Flux.data_1$CO2_wpl_LE[Npoints_1],type="l",col="RED"  );
